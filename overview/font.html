<!DOCTYPE html>
<html class="writer-html5" lang="zh-CN" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Fonts &mdash; LVGL  文档</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/fontawesome.min.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon.png"/>
    <link rel="canonical" href="https://docs.lvgl.io/0.0.1/overview/font.html" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
        <script src="../_static/translations.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="搜索" href="../search.html" />
 
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-78811084-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

	gtag('config', 'UA-78811084-3', { 'anonymize_ip': true });
</script>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html">
            
              <img src="../_static/logo_lvgl.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                0.0.1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="搜索文档" aria-label="搜索文档" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="导航菜单">
              <!-- Local TOC -->
              <div class="local-toc"><ul>
<li><a class="reference internal" href="#">Fonts</a><ul>
<li><a class="reference internal" href="#unicode-support">Unicode support</a></li>
<li><a class="reference internal" href="#built-in-fonts">Built-in fonts</a><ul>
<li><a class="reference internal" href="#normal-fonts">Normal fonts</a></li>
<li><a class="reference internal" href="#special-fonts">Special fonts</a></li>
</ul>
</li>
<li><a class="reference internal" href="#special-features">Special features</a><ul>
<li><a class="reference internal" href="#bidirectional-support">Bidirectional support</a></li>
<li><a class="reference internal" href="#arabic-and-persian-support">Arabic and Persian support</a></li>
<li><a class="reference internal" href="#subpixel-rendering">Subpixel rendering</a></li>
<li><a class="reference internal" href="#compressed-fonts">Compressed fonts</a></li>
</ul>
</li>
<li><a class="reference internal" href="#add-a-new-font">Add a new font</a></li>
<li><a class="reference internal" href="#add-new-symbols">Add new symbols</a></li>
<li><a class="reference internal" href="#load-a-font-at-run-time">Load a font at run-time</a></li>
<li><a class="reference internal" href="#add-a-new-font-engine">Add a new font engine</a></li>
<li><a class="reference internal" href="#use-font-fallback">Use font fallback</a></li>
</ul>
</li>
</ul>
</div>
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="移动版导航菜单" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">LVGL</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="页面导航">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Fonts</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/overview/font.md.txt" rel="nofollow"> 查看页面源码</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="highlight-eval_rst notranslate"><div class="highlight"><pre><span></span>.. include:: /header.rst 
:github_url: |github_link_base|/overview/font.md
</pre></div>
</div>
<section class="tex2jax_ignore mathjax_ignore" id="fonts">
<h1>Fonts<a class="headerlink" href="#fonts" title="此标题的永久链接"></a></h1>
<p>In LVGL fonts are collections of bitmaps and other information required to render images of individual letters (glyph).
A font is stored in a <code class="docutils literal notranslate"><span class="pre">lv_font_t</span></code> variable and can be set in a style's <em>text_font</em> field. For example:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">lv_style_set_text_font</span><span class="p">(</span><span class="o">&amp;</span><span class="n">my_style</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">lv_font_montserrat_28</span><span class="p">);</span><span class="w">  </span><span class="cm">/*Set a larger font*/</span>
</pre></div>
</div>
<p>Fonts have a <strong>bpp (bits per pixel)</strong> property. It shows how many bits are used to describe a pixel in a font. The value stored for a pixel determines the pixel's opacity.
This way, with higher <em>bpp</em>, the edges of the letter can be smoother. The possible <em>bpp</em> values are 1, 2, 4 and 8 (higher values mean better quality).</p>
<p>The <em>bpp</em> property also affects the amount of memory needed to store a font. For example, <em>bpp = 4</em> makes a font nearly four times larger compared to <em>bpp = 1</em>.</p>
<section id="unicode-support">
<h2>Unicode support<a class="headerlink" href="#unicode-support" title="此标题的永久链接"></a></h2>
<p>LVGL supports <strong>UTF-8</strong> encoded Unicode characters.
Your editor needs to be configured to save your code/text as UTF-8 (usually this the default) and be sure that, <code class="docutils literal notranslate"><span class="pre">LV_TXT_ENC</span></code> is set to <code class="docutils literal notranslate"><span class="pre">LV_TXT_ENC_UTF8</span></code> in <em>lv_conf.h</em>. (This is the default value)</p>
<p>To test it try</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">lv_obj_t</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">label1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">lv_label_create</span><span class="p">(</span><span class="n">lv_scr_act</span><span class="p">(),</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span>
<span class="n">lv_label_set_text</span><span class="p">(</span><span class="n">label1</span><span class="p">,</span><span class="w"> </span><span class="n">LV_SYMBOL_OK</span><span class="p">);</span>
</pre></div>
</div>
<p>If all works well, a ✓ character should be displayed.</p>
</section>
<section id="built-in-fonts">
<h2>Built-in fonts<a class="headerlink" href="#built-in-fonts" title="此标题的永久链接"></a></h2>
<p>There are several built-in fonts in different sizes, which can be enabled in <code class="docutils literal notranslate"><span class="pre">lv_conf.h</span></code> with <em>LV_FONT_...</em> defines.</p>
<section id="normal-fonts">
<h3>Normal fonts<a class="headerlink" href="#normal-fonts" title="此标题的永久链接"></a></h3>
<p>Containing all the ASCII characters, the degree symbol (U+00B0), the bullet symbol (U+2022) and the built-in symbols (see below).</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">LV_FONT_MONTSERRAT_12</span></code> 12 px font</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LV_FONT_MONTSERRAT_14</span></code> 14 px font</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LV_FONT_MONTSERRAT_16</span></code> 16 px font</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LV_FONT_MONTSERRAT_18</span></code> 18 px font</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LV_FONT_MONTSERRAT_20</span></code> 20 px font</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LV_FONT_MONTSERRAT_22</span></code> 22 px font</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LV_FONT_MONTSERRAT_24</span></code> 24 px font</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LV_FONT_MONTSERRAT_26</span></code> 26 px font</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LV_FONT_MONTSERRAT_28</span></code> 28 px font</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LV_FONT_MONTSERRAT_30</span></code> 30 px font</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LV_FONT_MONTSERRAT_32</span></code> 32 px font</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LV_FONT_MONTSERRAT_34</span></code> 34 px font</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LV_FONT_MONTSERRAT_36</span></code> 36 px font</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LV_FONT_MONTSERRAT_38</span></code> 38 px font</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LV_FONT_MONTSERRAT_40</span></code> 40 px font</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LV_FONT_MONTSERRAT_42</span></code> 42 px font</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LV_FONT_MONTSERRAT_44</span></code> 44 px font</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LV_FONT_MONTSERRAT_46</span></code> 46 px font</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LV_FONT_MONTSERRAT_48</span></code> 48 px font</p></li>
</ul>
</section>
<section id="special-fonts">
<h3>Special fonts<a class="headerlink" href="#special-fonts" title="此标题的永久链接"></a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">LV_FONT_MONTSERRAT_12_SUBPX</span></code> Same as normal 12 px font but with <span class="xref myst">subpixel rendering</span></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LV_FONT_MONTSERRAT_28_COMPRESSED</span></code> Same as normal 28 px font but stored as a <span class="xref myst">compressed font</span> with 3 bpp</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LV_FONT_DEJAVU_16_PERSIAN_HEBREW</span></code> 16 px font with normal range + Hebrew, Arabic, Persian letters and all their forms</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LV_FONT_SIMSUN_16_CJK</span></code>16 px font with normal range plus 1000 of the most common CJK radicals</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LV_FONT_UNSCII_8</span></code> 8 px pixel perfect font with only ASCII characters</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LV_FONT_UNSCII_16</span></code> 16 px pixel perfect font with only ASCII characters</p></li>
</ul>
<p>The built-in fonts are <strong>global variables</strong> with names like <code class="docutils literal notranslate"><span class="pre">lv_font_montserrat_16</span></code> for a 16 px height font. To use them in a style, just add a pointer to a font variable like shown above.</p>
<p>The built-in fonts with <em>bpp = 4</em> contain the ASCII characters and use the <a class="reference external" href="https://fonts.google.com/specimen/Montserrat">Montserrat</a> font.</p>
<p>In addition to the ASCII range, the following symbols are also added to the built-in fonts from the <a class="reference external" href="https://fontawesome.com/">FontAwesome</a> font.</p>
<p><img alt="" src="../_images/symbols.png" /></p>
<p>The symbols can be used singly as:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">lv_label_set_text</span><span class="p">(</span><span class="n">my_label</span><span class="p">,</span><span class="w"> </span><span class="n">LV_SYMBOL_OK</span><span class="p">);</span>
</pre></div>
</div>
<p>Or with together with strings (compile time string concatenation):</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">lv_label_set_text</span><span class="p">(</span><span class="n">my_label</span><span class="p">,</span><span class="w"> </span><span class="n">LV_SYMBOL_OK</span><span class="w"> </span><span class="s">&quot;Apply&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>Or more symbols together:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">lv_label_set_text</span><span class="p">(</span><span class="n">my_label</span><span class="p">,</span><span class="w"> </span><span class="n">LV_SYMBOL_OK</span><span class="w"> </span><span class="n">LV_SYMBOL_WIFI</span><span class="w"> </span><span class="n">LV_SYMBOL_PLAY</span><span class="p">);</span>
</pre></div>
</div>
</section>
</section>
<section id="special-features">
<h2>Special features<a class="headerlink" href="#special-features" title="此标题的永久链接"></a></h2>
<section id="bidirectional-support">
<h3>Bidirectional support<a class="headerlink" href="#bidirectional-support" title="此标题的永久链接"></a></h3>
<p>Most languages use a Left-to-Right (LTR for short) writing direction, however some languages (such as Hebrew, Persian or Arabic) use Right-to-Left (RTL for short) direction.</p>
<p>LVGL not only supports RTL texts but supports mixed (a.k.a. bidirectional, BiDi) text rendering too. Some examples:</p>
<p><img alt="" src="../_images/bidi.png" /></p>
<p>BiDi support is enabled by <code class="docutils literal notranslate"><span class="pre">LV_USE_BIDI</span></code> in <em>lv_conf.h</em></p>
<p>All texts have a base direction (LTR or RTL) which determines some rendering rules and the default alignment of the text (Left or Right).
However, in LVGL, the base direction is not only applied to labels. It's a general property which can be set for every object.
If not set then it will be inherited from the parent.
This means it's enough to set the base direction of a screen and every object will inherit it.</p>
<p>The default base direction for screens can be set by <code class="docutils literal notranslate"><span class="pre">LV_BIDI_BASE_DIR_DEF</span></code> in <em>lv_conf.h</em> and other objects inherit the base direction from their parent.</p>
<p>To set an object's base direction use <code class="docutils literal notranslate"><span class="pre">lv_obj_set_base_dir(obj,</span> <span class="pre">base_dir)</span></code>.  The possible base directions are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">LV_BIDI_DIR_LTR</span></code>: Left to Right base direction</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LV_BIDI_DIR_RTL</span></code>: Right to Left base direction</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LV_BIDI_DIR_AUTO</span></code>: Auto detect base direction</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LV_BIDI_DIR_INHERIT</span></code>: Inherit base direction from the parent (or a default value for non-screen objects)</p></li>
</ul>
<p>This list summarizes the effect of RTL base direction on objects:</p>
<ul class="simple">
<li><p>Create objects by default on the right</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">lv_tabview</span></code>: Displays tabs from right to left</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">lv_checkbox</span></code>: Shows the box on the right</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">lv_btnmatrix</span></code>: Shows buttons from right to left</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">lv_list</span></code>: Shows icons on the right</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">lv_dropdown</span></code>: Aligns options to the right</p></li>
<li><p>The texts in <code class="docutils literal notranslate"><span class="pre">lv_table</span></code>, <code class="docutils literal notranslate"><span class="pre">lv_btnmatrix</span></code>, <code class="docutils literal notranslate"><span class="pre">lv_keyboard</span></code>, <code class="docutils literal notranslate"><span class="pre">lv_tabview</span></code>, <code class="docutils literal notranslate"><span class="pre">lv_dropdown</span></code>, <code class="docutils literal notranslate"><span class="pre">lv_roller</span></code> are &quot;BiDi processed&quot; to be displayed correctly</p></li>
</ul>
</section>
<section id="arabic-and-persian-support">
<h3>Arabic and Persian support<a class="headerlink" href="#arabic-and-persian-support" title="此标题的永久链接"></a></h3>
<p>There are some special rules to display Arabic and Persian characters: the <em>form</em> of a character depends on its position in the text.
A different form of the same letter needs to be used if is isolated, at start, middle or end positions. Besides these, some conjunction rules should also be taken into account.</p>
<p>LVGL supports these rules if <code class="docutils literal notranslate"><span class="pre">LV_USE_ARABIC_PERSIAN_CHARS</span></code> is enabled.</p>
<p>However, there some limitations:</p>
<ul class="simple">
<li><p>Only displaying text is supported (e.g. on labels), text inputs (e.g. text area) don't support this feature.</p></li>
<li><p>Static text (i.e. const) is not processed. E.g. texts set by <code class="docutils literal notranslate"><span class="pre">lv_label_set_text()</span></code> will be &quot;Arabic processed&quot; but <code class="docutils literal notranslate"><span class="pre">lv_lable_set_text_static()</span></code> won't.</p></li>
<li><p>Text get functions (e.g. <code class="docutils literal notranslate"><span class="pre">lv_label_get_text()</span></code>) will return the processed text.</p></li>
</ul>
</section>
<section id="subpixel-rendering">
<h3>Subpixel rendering<a class="headerlink" href="#subpixel-rendering" title="此标题的永久链接"></a></h3>
<p>Subpixel rendering allows for tripling the horizontal resolution by rendering anti-aliased edges on Red, Green and Blue channels instead of at pixel level granularity. This takes advantage of the position of physical color channels of each pixel, resulting in higher quality letter anti-aliasing. Learn more <a class="reference external" href="https://en.wikipedia.org/wiki/Subpixel_rendering">here</a>.</p>
<p>For subpixel rendering, the fonts need to be generated with special settings:</p>
<ul class="simple">
<li><p>In the online converter tick the <code class="docutils literal notranslate"><span class="pre">Subpixel</span></code> box</p></li>
<li><p>In the command line tool use <code class="docutils literal notranslate"><span class="pre">--lcd</span></code> flag. Note that the generated font needs about three times more memory.</p></li>
</ul>
<p>Subpixel rendering works only if the color channels of the pixels have a horizontal layout. That is the R, G, B channels are next each other and not above each other.
The order of color channels also needs to match with the library settings. By default, LVGL assumes <code class="docutils literal notranslate"><span class="pre">RGB</span></code> order, however this can be swapped by setting <code class="docutils literal notranslate"><span class="pre">LV_SUBPX_BGR</span>&#160; <span class="pre">1</span></code> in <em>lv_conf.h</em>.</p>
</section>
<section id="compressed-fonts">
<h3>Compressed fonts<a class="headerlink" href="#compressed-fonts" title="此标题的永久链接"></a></h3>
<p>The bitmaps of fonts can be compressed by</p>
<ul class="simple">
<li><p>ticking the <code class="docutils literal notranslate"><span class="pre">Compressed</span></code> check box in the online converter</p></li>
<li><p>not passing the <code class="docutils literal notranslate"><span class="pre">--no-compress</span></code> flag to the offline converter (compression is applied by default)</p></li>
</ul>
<p>Compression is more effective with larger fonts and higher bpp. However, it's about 30% slower to render compressed fonts.
Therefore it's recommended to compress only the largest fonts of a user interface, because</p>
<ul class="simple">
<li><p>they need the most memory</p></li>
<li><p>they can be compressed better</p></li>
<li><p>and probably they are used less frequently then the medium-sized fonts, so the performance cost is smaller.</p></li>
</ul>
</section>
</section>
<section id="add-a-new-font">
<h2>Add a new font<a class="headerlink" href="#add-a-new-font" title="此标题的永久链接"></a></h2>
<p>There are several ways to add a new font to your project:</p>
<ol class="arabic simple">
<li><p>The simplest method is to use the <a class="reference external" href="https://lvgl.io/tools/fontconverter">Online font converter</a>. Just set the parameters, click the <em>Convert</em> button, copy the font to your project and use it. <strong>Be sure to carefully read the steps provided on that site or you will get an error while converting.</strong></p></li>
<li><p>Use the <a class="reference external" href="https://github.com/lvgl/lv_font_conv">Offline font converter</a>. (Requires Node.js to be installed)</p></li>
<li><p>If you want to create something like the built-in fonts (Montserrat font and symbols) but in a different size and/or ranges, you can use the <code class="docutils literal notranslate"><span class="pre">built_in_font_gen.py</span></code> script in <code class="docutils literal notranslate"><span class="pre">lvgl/scripts/built_in_font</span></code> folder.
(This requires Python and <code class="docutils literal notranslate"><span class="pre">lv_font_conv</span></code> to be installed)</p></li>
</ol>
<p>To declare a font in a file, use <code class="docutils literal notranslate"><span class="pre">LV_FONT_DECLARE(my_font_name)</span></code>.</p>
<p>To make fonts globally available (like the builtin fonts), add them to <code class="docutils literal notranslate"><span class="pre">LV_FONT_CUSTOM_DECLARE</span></code> in <em>lv_conf.h</em>.</p>
</section>
<section id="add-new-symbols">
<h2>Add new symbols<a class="headerlink" href="#add-new-symbols" title="此标题的永久链接"></a></h2>
<p>The built-in symbols are created from the <a class="reference external" href="https://fontawesome.com/">FontAwesome</a> font.</p>
<ol class="arabic simple">
<li><p>Search for a symbol on <a class="reference external" href="https://fontawesome.com">https://fontawesome.com</a>. For example the <a class="reference external" href="https://fontawesome.com/icons/usb?style=brands">USB symbol</a>. Copy its Unicode ID which is <code class="docutils literal notranslate"><span class="pre">0xf287</span></code> in this case.</p></li>
<li><p>Open the <a class="reference external" href="https://lvgl.io/tools/fontconverter">Online font converter</a>. Add <a class="reference external" href="https://lvgl.io/assets/others/FontAwesome5-Solid+Brands+Regular.woff">FontAwesome.woff</a>. .</p></li>
<li><p>Set the parameters such as Name, Size, BPP. You'll use this name to declare and use the font in your code.</p></li>
<li><p>Add the Unicode ID of the symbol to the range field. E.g.<code class="docutils literal notranslate"> <span class="pre">0xf287</span></code> for the USB symbol. More symbols can be enumerated with <code class="docutils literal notranslate"><span class="pre">,</span></code>.</p></li>
<li><p>Convert the font and copy the generated source code to your project. Make sure to compile the .c file of your font.</p></li>
<li><p>Declare the font using <code class="docutils literal notranslate"><span class="pre">extern</span> <span class="pre">lv_font_t</span> <span class="pre">my_font_name;</span></code> or simply use <code class="docutils literal notranslate"><span class="pre">LV_FONT_DECLARE(my_font_name);</span></code>.</p></li>
</ol>
<p><strong>Using the symbol</strong></p>
<ol class="arabic simple">
<li><p>Convert the Unicode value to UTF8, for example on <a class="reference external" href="http://www.ltg.ed.ac.uk/~richard/utf-8.cgi?input=f287&amp;mode=hex">this site</a>. For <code class="docutils literal notranslate"><span class="pre">0xf287</span></code> the <em>Hex UTF-8 bytes</em> are <code class="docutils literal notranslate"><span class="pre">EF</span> <span class="pre">8A</span> <span class="pre">87</span></code>.</p></li>
<li><p>Create a <code class="docutils literal notranslate"><span class="pre">define</span></code> string from the UTF8 values: <code class="docutils literal notranslate"><span class="pre">#define</span> <span class="pre">MY_USB_SYMBOL</span> <span class="pre">&quot;\xEF\x8A\x87&quot;</span></code></p></li>
<li><p>Create a label and set the text. Eg. <code class="docutils literal notranslate"><span class="pre">lv_label_set_text(label,</span> <span class="pre">MY_USB_SYMBOL)</span></code></p></li>
</ol>
<p>Note - <code class="docutils literal notranslate"><span class="pre">lv_label_set_text(label,</span> <span class="pre">MY_USB_SYMBOL)</span></code> searches for this symbol in the font defined in <code class="docutils literal notranslate"><span class="pre">style.text.font</span></code> properties. To use the symbol you may need to change it. Eg <code class="docutils literal notranslate"> <span class="pre">style.text.font</span> <span class="pre">=</span> <span class="pre">my_font_name</span></code></p>
</section>
<section id="load-a-font-at-run-time">
<h2>Load a font at run-time<a class="headerlink" href="#load-a-font-at-run-time" title="此标题的永久链接"></a></h2>
<p><code class="docutils literal notranslate"><span class="pre">lv_font_load</span></code> can be used to load a font from a file. The font needs to have a special binary format. (Not TTF or WOFF).
Use <a class="reference external" href="https://github.com/lvgl/lv_font_conv/">lv_font_conv</a> with the <code class="docutils literal notranslate"><span class="pre">--format</span> <span class="pre">bin</span></code> option to generate an LVGL compatible font file.</p>
<p>Note that to load a font <a class="reference internal" href="file-system.html"><span class="doc std std-doc">LVGL's filesystem</span></a> needs to be enabled and a driver must be added.</p>
<p>Example</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">lv_font_t</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">my_font</span><span class="p">;</span>
<span class="n">my_font</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">lv_font_load</span><span class="p">(</span><span class="n">X</span><span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">my_font</span><span class="p">.</span><span class="n">bin</span><span class="p">);</span>

<span class="cm">/*Use the font*/</span>

<span class="cm">/*Free the font if not required anymore*/</span>
<span class="n">lv_font_free</span><span class="p">(</span><span class="n">my_font</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="add-a-new-font-engine">
<h2>Add a new font engine<a class="headerlink" href="#add-a-new-font-engine" title="此标题的永久链接"></a></h2>
<p>LVGL's font interface is designed to be very flexible but, even so, you can add your own font engine in place of LVGL's internal one.
For example, you can use <a class="reference external" href="https://www.freetype.org/">FreeType</a> to real-time render glyphs from TTF fonts or use an external flash to store the font's bitmap and read them when the library needs them.</p>
<p>A ready to use FreeType can be found in <a class="reference external" href="https://github.com/lvgl/lv_lib_freetype">lv_freetype</a> repository.</p>
<p>To do this, a custom <code class="docutils literal notranslate"><span class="pre">lv_font_t</span></code> variable needs to be created:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/*Describe the properties of a font*/</span>
<span class="n">lv_font_t</span><span class="w"> </span><span class="n">my_font</span><span class="p">;</span>
<span class="n">my_font</span><span class="p">.</span><span class="n">get_glyph_dsc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">my_get_glyph_dsc_cb</span><span class="p">;</span><span class="w">        </span><span class="cm">/*Set a callback to get info about gylphs*/</span>
<span class="n">my_font</span><span class="p">.</span><span class="n">get_glyph_bitmap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">my_get_glyph_bitmap_cb</span><span class="p">;</span><span class="w">  </span><span class="cm">/*Set a callback to get bitmap of a glyp*/</span>
<span class="n">my_font</span><span class="p">.</span><span class="n">line_height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">height</span><span class="p">;</span><span class="w">                       </span><span class="cm">/*The real line height where any text fits*/</span>
<span class="n">my_font</span><span class="p">.</span><span class="n">base_line</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">base_line</span><span class="p">;</span><span class="w">                      </span><span class="cm">/*Base line measured from the top of line_height*/</span>
<span class="n">my_font</span><span class="p">.</span><span class="n">dsc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">something_required</span><span class="p">;</span><span class="w">                   </span><span class="cm">/*Store any implementation specific data here*/</span>
<span class="n">my_font</span><span class="p">.</span><span class="n">user_data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">user_data</span><span class="p">;</span><span class="w">                      </span><span class="cm">/*Optionally some extra user data*/</span>

<span class="p">...</span>

<span class="cm">/* Get info about glyph of `unicode_letter` in `font` font.</span>
<span class="cm"> * Store the result in `dsc_out`.</span>
<span class="cm"> * The next letter (`unicode_letter_next`) might be used to calculate the width required by this glyph (kerning)</span>
<span class="cm"> */</span>
<span class="kt">bool</span><span class="w"> </span><span class="n">my_get_glyph_dsc_cb</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">lv_font_t</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">font</span><span class="p">,</span><span class="w"> </span><span class="n">lv_font_glyph_dsc_t</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">dsc_out</span><span class="p">,</span><span class="w"> </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">unicode_letter</span><span class="p">,</span><span class="w"> </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">unicode_letter_next</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="cm">/*Your code here*/</span>

<span class="w">    </span><span class="cm">/* Store the result.</span>
<span class="cm">     * For example ...</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="n">dsc_out</span><span class="o">-&gt;</span><span class="n">adv_w</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">12</span><span class="p">;</span><span class="w">        </span><span class="cm">/*Horizontal space required by the glyph in [px]*/</span>
<span class="w">    </span><span class="n">dsc_out</span><span class="o">-&gt;</span><span class="n">box_h</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">8</span><span class="p">;</span><span class="w">         </span><span class="cm">/*Height of the bitmap in [px]*/</span>
<span class="w">    </span><span class="n">dsc_out</span><span class="o">-&gt;</span><span class="n">box_w</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">6</span><span class="p">;</span><span class="w">         </span><span class="cm">/*Width of the bitmap in [px]*/</span>
<span class="w">    </span><span class="n">dsc_out</span><span class="o">-&gt;</span><span class="n">ofs_x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w">         </span><span class="cm">/*X offset of the bitmap in [pf]*/</span>
<span class="w">    </span><span class="n">dsc_out</span><span class="o">-&gt;</span><span class="n">ofs_y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span><span class="w">         </span><span class="cm">/*Y offset of the bitmap measured from the as line*/</span>
<span class="w">    </span><span class="n">dsc_out</span><span class="o">-&gt;</span><span class="n">bpp</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w">         </span><span class="cm">/*Bits per pixel: 1/2/4/8*/</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span><span class="w">                </span><span class="cm">/*true: glyph found; false: glyph was not found*/</span>
<span class="p">}</span>


<span class="cm">/* Get the bitmap of `unicode_letter` from `font`. */</span>
<span class="k">const</span><span class="w"> </span><span class="kt">uint8_t</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">my_get_glyph_bitmap_cb</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">lv_font_t</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">font</span><span class="p">,</span><span class="w"> </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">unicode_letter</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="cm">/* Your code here */</span>

<span class="w">    </span><span class="cm">/* The bitmap should be a continuous bitstream where</span>
<span class="cm">     * each pixel is represented by `bpp` bits */</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">bitmap</span><span class="p">;</span><span class="w">    </span><span class="cm">/*Or NULL if not found*/</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="use-font-fallback">
<h2>Use font fallback<a class="headerlink" href="#use-font-fallback" title="此标题的永久链接"></a></h2>
<p>You can specify <code class="docutils literal notranslate"><span class="pre">fallback</span></code> in <code class="docutils literal notranslate"><span class="pre">lv_font_t</span></code> to provide fallback to the font. When the font
fails to find glyph to a letter, it will try to let font from <code class="docutils literal notranslate"><span class="pre">fallback</span></code> to handle.</p>
<p><code class="docutils literal notranslate"><span class="pre">fallback</span></code> can be chained, so it will try to solve until there is no <code class="docutils literal notranslate"><span class="pre">fallback</span></code> set.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/* Roboto font doesn&#39;t have support for CJK glyphs */</span>
<span class="n">lv_font_t</span><span class="w"> </span><span class="o">*</span><span class="n">roboto</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">my_font_load_function</span><span class="p">();</span>
<span class="cm">/* Droid Sans Fallback has more glyphs but its typeface doesn&#39;t look good as Roboto */</span>
<span class="n">lv_font_t</span><span class="w"> </span><span class="o">*</span><span class="n">droid_sans_fallback</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">my_font_load_function</span><span class="p">();</span>
<span class="cm">/* So now we can display Roboto for supported characters while having wider characters set support */</span>
<span class="n">roboto</span><span class="o">-&gt;</span><span class="n">fallback</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">droid_sans_fallback</span><span class="p">;</span>
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; 版权所有 2021, LVGL Kft.
      <span class="lastupdated">最后更新于 2025 年 09 月 02 日.
      </span></p>
  </div>

  利用 <a href="https://www.sphinx-doc.org/">Sphinx</a> 构建，使用的 
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">主题</a>
    由 <a href="https://readthedocs.org">Read the Docs</a> 开发.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

<style>
  .wy-side-nav-search > div[role="search"] {
    color: black;
  }
</style>
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header").click(function() {
            $(this).parent().children().not(".header").toggle(400);
            $(this).parent().children(".header").toggleClass("open");
        })
    });
</script>

<script type="text/javascript">
function add_version_selector()
{
    return fetch("https://raw.githubusercontent.com/lvgl/docs_compiled/gh-pages/versionlist.txt")
        .then(res => res.text())
        .then(text => {
            const versions = text.split("\n").filter(version => version.trim().length > 0);
            let p = document.getElementById("rtd-search-form").parentElement;
            p.innerHTML = `
            <select name="versions" id="versions" onchange="ver_sel()" style="border-radius:5px; margin-bottom:15px">
            ${versions.map(version => {
                let versionName = "";  
                if(version == "master") versionName = "master (latest)";
                else versionName = "v" + ((version.indexOf(".") != -1) ? version : (version + " (latest minor)"));
                return `<option value="${version}">${versionName}</option>`;
            })}
            </select>` + p.innerHTML;
        });
}

function ver_sel()
{
  var x = document.getElementById("versions").value;
  window.location.href = window.location.protocol + "//" + window.location.host + "/" + x + "/";
}

document.addEventListener('DOMContentLoaded', (event) => {
    add_version_selector().then(() => {
        var value = window.location.pathname.split('/')[1];
        document.getElementById("versions").value = value;
    });
    
})
document.addEventListener('DOMContentLoaded', (event) => {
    function onIntersection(entries) {
        entries.forEach(entry => {
            let currentlyLoaded = entry.target.getAttribute("data-is-loaded") == "true";
            let shouldBeLoaded = entry.intersectionRatio > 0;
            if(currentlyLoaded != shouldBeLoaded) {
                entry.target.setAttribute("data-is-loaded", shouldBeLoaded);
                if(shouldBeLoaded) {
                    let iframe = document.createElement("iframe");
                    iframe.src = entry.target.getAttribute("data-real-src");
                    entry.target.appendChild(iframe);
                } else {
                    let iframe = entry.target.querySelector("iframe");
                    iframe.parentNode.removeChild(iframe);
                }
            }
        });
    }
    const config = {
        rootMargin: '600px 0px',
        threshold: 0.01
    };
    let observer = new IntersectionObserver(onIntersection, config);
    document.querySelectorAll(".lv-example").forEach(iframe => {
        observer.observe(iframe);
    });
});
</script>


</body>
</html>