<!DOCTYPE html>
<html class="writer-html5" lang="zh-CN" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Button matrix (lv_btnmatrix) &mdash; LVGL  文档</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/custom.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/fontawesome.min.css" type="text/css" />
    <link rel="shortcut icon" href="../../_static/favicon.png"/>
    <link rel="canonical" href="https://docs.lvgl.io/0.0.1/widgets/core/btnmatrix.html" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/sphinx_highlight.js"></script>
        <script src="../../_static/translations.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="索引" href="../../genindex.html" />
    <link rel="search" title="搜索" href="../../search.html" />
 
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-78811084-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

	gtag('config', 'UA-78811084-3', { 'anonymize_ip': true });
</script>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html">
            
              <img src="../../_static/logo_lvgl.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                0.0.1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="搜索文档" aria-label="搜索文档" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="导航菜单">
              <!-- Local TOC -->
              <div class="local-toc"><ul>
<li><a class="reference internal" href="#">Button matrix (lv_btnmatrix)</a><ul>
<li><a class="reference internal" href="#overview">Overview</a></li>
<li><a class="reference internal" href="#parts-and-styles">Parts and Styles</a></li>
<li><a class="reference internal" href="#usage">Usage</a><ul>
<li><a class="reference internal" href="#button-s-text">Button's text</a></li>
<li><a class="reference internal" href="#control-buttons">Control buttons</a></li>
<li><a class="reference internal" href="#one-check">One check</a></li>
</ul>
</li>
<li><a class="reference internal" href="#events">Events</a></li>
<li><a class="reference internal" href="#keys">Keys</a></li>
<li><a class="reference internal" href="#example">Example</a></li>
<li><a class="reference internal" href="#api">API</a></li>
</ul>
</li>
</ul>
</div>
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="移动版导航菜单" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">LVGL</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="页面导航">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Button matrix (lv_btnmatrix)</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/widgets/core/btnmatrix.md.txt" rel="nofollow"> 查看页面源码</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="highlight-eval_rst notranslate"><div class="highlight"><pre><span></span>.. include:: /header.rst 
:github_url: |github_link_base|/widgets/core/btnmatrix.md
</pre></div>
</div>
<section class="tex2jax_ignore mathjax_ignore" id="button-matrix-lv-btnmatrix">
<h1>Button matrix (lv_btnmatrix)<a class="headerlink" href="#button-matrix-lv-btnmatrix" title="此标题的永久链接"></a></h1>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="此标题的永久链接"></a></h2>
<p>The Button Matrix object is a lightweight way to display multiple buttons in rows and columns. Lightweight because the buttons are not actually created but just virtually drawn on the fly. This way, one button use only eight extra bytes of memory instead of the ~100-150 bytes a normal <a class="reference internal" href="btn.html"><span class="doc std std-doc">Button</span></a> object plus the 100 or so bytes for the the <a class="reference internal" href="label.html"><span class="doc std std-doc">Label</span></a> object.</p>
<p>The Button matrix is added to the default group (if one is set). Besides the Button matrix is an editable object to allow selecting and clicking the buttons with encoder navigation too.</p>
</section>
<section id="parts-and-styles">
<h2>Parts and Styles<a class="headerlink" href="#parts-and-styles" title="此标题的永久链接"></a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">LV_PART_MAIN</span></code> The background of the button matrix, uses the typical background style properties. <code class="docutils literal notranslate"><span class="pre">pad_row</span></code> and <code class="docutils literal notranslate"><span class="pre">pad_column</span></code> sets the space between the buttons.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LV_PART_ITEMS</span></code> The buttons all use the text and typical background style properties except translations and transformations.</p></li>
</ul>
</section>
<section id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="此标题的永久链接"></a></h2>
<section id="button-s-text">
<h3>Button's text<a class="headerlink" href="#button-s-text" title="此标题的永久链接"></a></h3>
<p>There is a text on each button. To specify them a descriptor string array, called <em>map</em>, needs to be used.
The map can be set with <code class="docutils literal notranslate"><span class="pre">lv_btnmatrix_set_map(btnm,</span> <span class="pre">my_map)</span></code>.
The declaration of a map should look like <code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">char</span> <span class="pre">*</span> <span class="pre">map[]</span> <span class="pre">=</span> <span class="pre">{&quot;btn1&quot;,</span> <span class="pre">&quot;btn2&quot;,</span> <span class="pre">&quot;btn3&quot;,</span> <span class="pre">NULL}</span></code>.
Note that the last element has to be either <code class="docutils literal notranslate"><span class="pre">NULL</span></code> or an empty string (<code class="docutils literal notranslate"><span class="pre">&quot;&quot;</span></code>)!</p>
<p>Use <code class="docutils literal notranslate"><span class="pre">&quot;\n&quot;</span></code> in the map to insert a <strong>line break</strong>. E.g. <code class="docutils literal notranslate"><span class="pre">{&quot;btn1&quot;,</span> <span class="pre">&quot;btn2&quot;,</span> <span class="pre">&quot;\n&quot;,</span> <span class="pre">&quot;btn3&quot;,</span> <span class="pre">&quot;&quot;}</span></code>. Each line's buttons have their width calculated automatically.
So in the example the first row will have 2 buttons each with 50% width and a second row with 1 button having 100% width.</p>
</section>
<section id="control-buttons">
<h3>Control buttons<a class="headerlink" href="#control-buttons" title="此标题的永久链接"></a></h3>
<p>The buttons' width can be set relative to the other button in the same row with <code class="docutils literal notranslate"><span class="pre">lv_btnmatrix_set_btn_width(btnm,</span> <span class="pre">btn_id,</span> <span class="pre">width)</span></code>
E.g. in a line with two buttons: <em>btnA, width = 1</em> and <em>btnB, width = 2</em>, <em>btnA</em> will have 33 % width and <em>btnB</em> will have 66 % width.
It's similar to how the <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/CSS/flex-grow"><code class="docutils literal notranslate"><span class="pre">flex-grow</span></code></a> property works in CSS.
The width must be in the [1..7] range and the default width is 1.</p>
<p>In addition to the width, each button can be customized with the following parameters:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">LV_BTNMATRIX_CTRL_HIDDEN</span></code> Makes a button hidden (hidden buttons still take up space in the layout, they are just not visible or clickable)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LV_BTNMATRIX_CTRL_NO_REPEAT</span></code> Disable repeating when the button is long pressed</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LV_BTNMATRIX_CTRL_DISABLED</span></code> Makes a button disabled Like <code class="docutils literal notranslate"><span class="pre">LV_STATE_DISABLED</span></code> on normal objects</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LV_BTNMATRIX_CTRL_CHECKABLE</span></code> Enable toggling of a button. I.e. <code class="docutils literal notranslate"><span class="pre">LV_STATE_CHECHED</span></code> will be added/removed as the button is clicked</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LV_BTNMATRIX_CTRL_CHECKED</span></code> Make the button checked. It will use the <code class="docutils literal notranslate"><span class="pre">LV_STATE_CHECHKED</span></code> styles.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LV_BTNMATRIX_CTRL_CLICK_TRIG</span></code> Enabled: send LV_EVENT_VALUE_CHANGE on CLICK, Disabled: send LV_EVENT_VALUE_CHANGE on PRESS</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LV_BTNMATRIX_CTRL_POPOVER</span></code> Show the button label in a popover when pressing this key</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LV_BTNMATRIX_CTRL_RECOLOR</span></code> Enable recoloring of button texts with <code class="docutils literal notranslate"><span class="pre">#</span></code>. E.g. <code class="docutils literal notranslate"><span class="pre">&quot;It's</span> <span class="pre">#ff0000</span> <span class="pre">red#&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LV_BTNMATRIX_CTRL_CUSTOM_1</span></code> Custom free to use flag</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LV_BTNMATRIX_CTRL_CUSTOM_2</span></code> Custom free to use flag</p></li>
</ul>
<p>By default, all flags are disabled.</p>
<p>To set or clear a button's control attribute, use <code class="docutils literal notranslate"><span class="pre">lv_btnmatrix_set_btn_ctrl(btnm,</span> <span class="pre">btn_id,</span> <span class="pre">LV_BTNM_CTRL_...)</span></code> and
<code class="docutils literal notranslate"><span class="pre">lv_btnmatrix_clear_btn_ctrl(btnm,</span> <span class="pre">btn_id,</span> <span class="pre">LV_BTNMATRIX_CTRL_...)</span></code> respectively. More <code class="docutils literal notranslate"><span class="pre">LV_BTNM_CTRL_...</span></code> values can be OR-ed</p>
<p>To set/clear the same control attribute for all buttons of a button matrix, use <code class="docutils literal notranslate"><span class="pre">lv_btnmatrix_set_btn_ctrl_all(btnm,</span> <span class="pre">LV_BTNM_CTRL_...)</span></code> and
<code class="docutils literal notranslate"><span class="pre">lv_btnmatrix_clear_btn_ctrl_all(btnm,</span> <span class="pre">LV_BTNMATRIX_CTRL_...)</span></code>.</p>
<p>The set a control map for a button matrix (similarly to the map for the text), use <code class="docutils literal notranslate"><span class="pre">lv_btnmatrix_set_ctrl_map(btnm,</span> <span class="pre">ctrl_map)</span></code>.
An element of <code class="docutils literal notranslate"><span class="pre">ctrl_map</span></code> should look like <code class="docutils literal notranslate"><span class="pre">ctrl_map[0]</span> <span class="pre">=</span> <span class="pre">width</span> <span class="pre">|</span> <span class="pre">LV_BTNM_CTRL_NO_REPEAT</span> <span class="pre">|</span>&#160; <span class="pre">LV_BTNM_CTRL_CHECHKABLE</span></code>.
The number of elements should be equal to the number of buttons (excluding newlines characters).</p>
</section>
<section id="one-check">
<h3>One check<a class="headerlink" href="#one-check" title="此标题的永久链接"></a></h3>
<p>The &quot;One check&quot; feature can be enabled with <code class="docutils literal notranslate"><span class="pre">lv_btnmatrix_set_one_checked(btnm,</span> <span class="pre">true)</span></code> to allow only one button to be checked at a time.</p>
</section>
</section>
<section id="events">
<h2>Events<a class="headerlink" href="#events" title="此标题的永久链接"></a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">LV_EVENT_VALUE_CHANGED</span></code> Sent when a button is pressed/released or repeated after long press. The event parameter is set to the ID of the pressed/released button.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LV_EVENT_DRAW_PART_BEGIN</span></code> and <code class="docutils literal notranslate"><span class="pre">LV_EVENT_DRAW_PART_END</span></code> are sent for the following types:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">LV_BTNMATRIX_DRAW_PART_BTN</span></code> The individual buttons.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">part</span></code>: <code class="docutils literal notranslate"><span class="pre">LV_PART_ITEMS</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">id</span></code>:index of the button being drawn</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">draw_area</span></code>: the area of teh button</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rect_dsc</span></code></p></li>
</ul>
</li>
</ul>
</li>
</ul>
<p>See the events of the <a class="reference internal" href="../obj.html"><span class="doc std std-doc">Base object</span></a> too.</p>
<p><code class="docutils literal notranslate"><span class="pre">lv_btnmatrix_get_selected_btn(btnm)</span></code> returns the index of the most recently released or focused button or <code class="docutils literal notranslate"><span class="pre">LV_BTNMATRIX_BTN_NONE</span></code> if no such button.</p>
<p><code class="docutils literal notranslate"><span class="pre">lv_btnmatrix_get_btn_text(btnm,</span> <span class="pre">btn_id)</span></code> returns a pointer to the text of <code class="docutils literal notranslate"><span class="pre">btn_id</span></code>th button.</p>
<p>Learn more about <a class="reference internal" href="../../overview/event.html"><span class="doc std std-doc">Events</span></a>.</p>
</section>
<section id="keys">
<h2>Keys<a class="headerlink" href="#keys" title="此标题的永久链接"></a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">LV_KEY_RIGHT/UP/LEFT/RIGHT</span></code> To navigate among the buttons to select one</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LV_KEY_ENTER</span></code> To press/release the selected button</p></li>
</ul>
<p>Learn more about <a class="reference internal" href="../../overview/indev.html"><span class="doc std std-doc">Keys</span></a>.</p>
</section>
<section id="example">
<h2>Example<a class="headerlink" href="#example" title="此标题的永久链接"></a></h2>
<div class="highlight-eval_rst notranslate"><div class="highlight"><pre><span></span>
.. include:: ../../../examples/widgets/btnmatrix/index.rst

</pre></div>
</div>
</section>
<section id="api">
<h2>API<a class="headerlink" href="#api" title="此标题的永久链接"></a></h2>
<div class="highlight-eval_rst notranslate"><div class="highlight"><pre><span></span>
.. doxygenfile:: lv_btnmatrix.h
  :project: lvgl

</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; 版权所有 2021, LVGL Kft.
      <span class="lastupdated">最后更新于 2025 年 09 月 02 日.
      </span></p>
  </div>

  利用 <a href="https://www.sphinx-doc.org/">Sphinx</a> 构建，使用的 
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">主题</a>
    由 <a href="https://readthedocs.org">Read the Docs</a> 开发.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

<style>
  .wy-side-nav-search > div[role="search"] {
    color: black;
  }
</style>
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header").click(function() {
            $(this).parent().children().not(".header").toggle(400);
            $(this).parent().children(".header").toggleClass("open");
        })
    });
</script>

<script type="text/javascript">
function add_version_selector()
{
    return fetch("https://raw.githubusercontent.com/lvgl/docs_compiled/gh-pages/versionlist.txt")
        .then(res => res.text())
        .then(text => {
            const versions = text.split("\n").filter(version => version.trim().length > 0);
            let p = document.getElementById("rtd-search-form").parentElement;
            p.innerHTML = `
            <select name="versions" id="versions" onchange="ver_sel()" style="border-radius:5px; margin-bottom:15px">
            ${versions.map(version => {
                let versionName = "";  
                if(version == "master") versionName = "master (latest)";
                else versionName = "v" + ((version.indexOf(".") != -1) ? version : (version + " (latest minor)"));
                return `<option value="${version}">${versionName}</option>`;
            })}
            </select>` + p.innerHTML;
        });
}

function ver_sel()
{
  var x = document.getElementById("versions").value;
  window.location.href = window.location.protocol + "//" + window.location.host + "/" + x + "/";
}

document.addEventListener('DOMContentLoaded', (event) => {
    add_version_selector().then(() => {
        var value = window.location.pathname.split('/')[1];
        document.getElementById("versions").value = value;
    });
    
})
document.addEventListener('DOMContentLoaded', (event) => {
    function onIntersection(entries) {
        entries.forEach(entry => {
            let currentlyLoaded = entry.target.getAttribute("data-is-loaded") == "true";
            let shouldBeLoaded = entry.intersectionRatio > 0;
            if(currentlyLoaded != shouldBeLoaded) {
                entry.target.setAttribute("data-is-loaded", shouldBeLoaded);
                if(shouldBeLoaded) {
                    let iframe = document.createElement("iframe");
                    iframe.src = entry.target.getAttribute("data-real-src");
                    entry.target.appendChild(iframe);
                } else {
                    let iframe = entry.target.querySelector("iframe");
                    iframe.parentNode.removeChild(iframe);
                }
            }
        });
    }
    const config = {
        rootMargin: '600px 0px',
        threshold: 0.01
    };
    let observer = new IntersectionObserver(onIntersection, config);
    document.querySelectorAll(".lv-example").forEach(iframe => {
        observer.observe(iframe);
    });
});
</script>


</body>
</html>