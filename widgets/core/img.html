<!DOCTYPE html>
<html class="writer-html5" lang="zh-CN" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Image (lv_img) &mdash; LVGL  文档</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/custom.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/fontawesome.min.css" type="text/css" />
    <link rel="shortcut icon" href="../../_static/favicon.png"/>
    <link rel="canonical" href="https://docs.lvgl.io/0.0.1/widgets/core/img.html" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/sphinx_highlight.js"></script>
        <script src="../../_static/translations.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="索引" href="../../genindex.html" />
    <link rel="search" title="搜索" href="../../search.html" />
 
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-78811084-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

	gtag('config', 'UA-78811084-3', { 'anonymize_ip': true });
</script>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html">
            
              <img src="../../_static/logo_lvgl.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                0.0.1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="搜索文档" aria-label="搜索文档" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="导航菜单">
              <!-- Local TOC -->
              <div class="local-toc"><ul>
<li><a class="reference internal" href="#">Image (lv_img)</a><ul>
<li><a class="reference internal" href="#overview">Overview</a></li>
<li><a class="reference internal" href="#parts-and-styles">Parts and Styles</a></li>
<li><a class="reference internal" href="#usage">Usage</a><ul>
<li><a class="reference internal" href="#image-source">Image source</a></li>
<li><a class="reference internal" href="#label-as-an-image">Label as an image</a></li>
<li><a class="reference internal" href="#transparency">Transparency</a></li>
<li><a class="reference internal" href="#palette-and-alpha-index">Palette and Alpha index</a></li>
<li><a class="reference internal" href="#recolor">Recolor</a></li>
<li><a class="reference internal" href="#auto-size">Auto-size</a></li>
<li><a class="reference internal" href="#mosaic">Mosaic</a></li>
<li><a class="reference internal" href="#offset">Offset</a></li>
</ul>
</li>
<li><a class="reference internal" href="#transformations">Transformations</a><ul>
<li><a class="reference internal" href="#size-mode">Size mode</a></li>
</ul>
</li>
<li><a class="reference internal" href="#events">Events</a></li>
<li><a class="reference internal" href="#keys">Keys</a></li>
<li><a class="reference internal" href="#example">Example</a></li>
<li><a class="reference internal" href="#api">API</a></li>
</ul>
</li>
</ul>
</div>
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="移动版导航菜单" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">LVGL</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="页面导航">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Image (lv_img)</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/widgets/core/img.md.txt" rel="nofollow"> 查看页面源码</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="highlight-eval_rst notranslate"><div class="highlight"><pre><span></span>.. include:: /header.rst 
:github_url: |github_link_base|/widgets/core/img.md
</pre></div>
</div>
<section class="tex2jax_ignore mathjax_ignore" id="image-lv-img">
<h1>Image (lv_img)<a class="headerlink" href="#image-lv-img" title="此标题的永久链接"></a></h1>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="此标题的永久链接"></a></h2>
<p>Images are the basic object to display images from flash (as arrays) or from files. Images can display symbols (<code class="docutils literal notranslate"><span class="pre">LV_SYMBOL_...</span></code>) too.</p>
<p>Using the <span class="xref myst">Image decoder interface</span> custom image formats can be supported as well.</p>
</section>
<section id="parts-and-styles">
<h2>Parts and Styles<a class="headerlink" href="#parts-and-styles" title="此标题的永久链接"></a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">LV_PART_MAIN</span></code> A background rectangle that uses the typical background style properties and the image itself using the image style properties.</p></li>
</ul>
</section>
<section id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="此标题的永久链接"></a></h2>
<section id="image-source">
<h3>Image source<a class="headerlink" href="#image-source" title="此标题的永久链接"></a></h3>
<p>To provide maximum flexibility, the source of the image can be:</p>
<ul class="simple">
<li><p>a variable in code (a C array with the pixels).</p></li>
<li><p>a file stored externally (e.g. on an SD card).</p></li>
<li><p>a text with <a class="reference internal" href="../../overview/font.html"><span class="doc std std-doc">Symbols</span></a>.</p></li>
</ul>
<p>To set the source of an image, use <code class="docutils literal notranslate"><span class="pre">lv_img_set_src(img,</span> <span class="pre">src)</span></code>.</p>
<p>To generate a pixel array from a PNG, JPG or BMP image, use the <a class="reference external" href="https://lvgl.io/tools/imageconverter">Online image converter tool</a> and set the converted image with its pointer: <code class="docutils literal notranslate"><span class="pre">lv_img_set_src(img1,</span> <span class="pre">&amp;converted_img_var);</span></code>
To make the variable visible in the C file, you need to declare it with <code class="docutils literal notranslate"><span class="pre">LV_IMG_DECLARE(converted_img_var)</span></code>.</p>
<p>To use external files, you also need to convert the image files using the online converter tool but now you should select the binary output format.
You also need to use LVGL's file system module and register a driver with some functions for the basic file operation. Go to the <a class="reference internal" href="../../overview/file-system.html"><span class="doc std std-doc">File system</span></a> to learn more.
To set an image sourced from a file, use <code class="docutils literal notranslate"><span class="pre">lv_img_set_src(img,</span> <span class="pre">&quot;S:folder1/my_img.bin&quot;)</span></code>.</p>
<p>You can also set a symbol similarly to <a class="reference internal" href="label.html"><span class="doc std std-doc">Labels</span></a>. In this case, the image will be rendered as text according to the <em>font</em> specified in the style.  It enables to use of light-weight monochrome &quot;letters&quot; instead of real images. You can set symbol like <code class="docutils literal notranslate"><span class="pre">lv_img_set_src(img1,</span> <span class="pre">LV_SYMBOL_OK)</span></code>.</p>
</section>
<section id="label-as-an-image">
<h3>Label as an image<a class="headerlink" href="#label-as-an-image" title="此标题的永久链接"></a></h3>
<p>Images and labels are sometimes used to convey the same thing. For example, to describe what a button does.
Therefore, images and labels are somewhat interchangeable, that is the images can display texts by using <code class="docutils literal notranslate"><span class="pre">LV_SYMBOL_DUMMY</span></code> as the prefix of the text. For example, <code class="docutils literal notranslate"><span class="pre">lv_img_set_src(img,</span> <span class="pre">LV_SYMBOL_DUMMY</span> <span class="pre">&quot;Some</span> <span class="pre">text&quot;)</span></code>.</p>
</section>
<section id="transparency">
<h3>Transparency<a class="headerlink" href="#transparency" title="此标题的永久链接"></a></h3>
<p>The internal (variable) and external images support 2 transparency handling methods:</p>
<ul class="simple">
<li><p><strong>Chroma-keying</strong> - Pixels with <code class="docutils literal notranslate"><span class="pre">LV_COLOR_CHROMA_KEY</span></code> (<em>lv_conf.h</em>) color will be transparent.</p></li>
<li><p><strong>Alpha byte</strong> - An alpha byte is added to every pixel that contains the pixel's opacity</p></li>
</ul>
</section>
<section id="palette-and-alpha-index">
<h3>Palette and Alpha index<a class="headerlink" href="#palette-and-alpha-index" title="此标题的永久链接"></a></h3>
<p>Besides the <em>True color</em> (RGB) color format, the following formats are supported:</p>
<ul class="simple">
<li><p><strong>Indexed</strong> - Image has a palette.</p></li>
<li><p><strong>Alpha indexed</strong> - Only alpha values are stored.</p></li>
</ul>
<p>These options can be selected in the image converter. To learn more about the color formats, read the <a class="reference internal" href="../../overview/image.html"><span class="doc std std-doc">Images</span></a> section.</p>
</section>
<section id="recolor">
<h3>Recolor<a class="headerlink" href="#recolor" title="此标题的永久链接"></a></h3>
<p>A color can be mixed with every pixel of an image with a given intensity.
This can be useful to show different states (checked, inactive, pressed, etc.) of an image without storing more versions of the same image.
This feature can be enabled in the style by setting <code class="docutils literal notranslate"><span class="pre">img_recolor_opa</span></code> between <code class="docutils literal notranslate"><span class="pre">LV_OPA_TRANSP</span></code> (no recolor, value: 0) and <code class="docutils literal notranslate"><span class="pre">LV_OPA_COVER</span></code> (full recolor, value: 255).
The default value is <code class="docutils literal notranslate"><span class="pre">LV_OPA_TRANSP</span></code> so this feature is disabled.</p>
<p>The color to mix is set by <code class="docutils literal notranslate"><span class="pre">img_recolor</span></code>.</p>
</section>
<section id="auto-size">
<h3>Auto-size<a class="headerlink" href="#auto-size" title="此标题的永久链接"></a></h3>
<p>If the width or height of the image object is set to <code class="docutils literal notranslate"><span class="pre">LV_SIZE_CONTENT</span></code> the object's size will be set according to the size of the image source in the respective direction.</p>
</section>
<section id="mosaic">
<h3>Mosaic<a class="headerlink" href="#mosaic" title="此标题的永久链接"></a></h3>
<p>If the object's size is greater than the image size in any directions, then the image will be repeated like a mosaic.
This allows creation a large image from only a very narrow source.
For example, you can have a <em>300 x 5</em> image with a special gradient and set it as a wallpaper using the mosaic feature.</p>
</section>
<section id="offset">
<h3>Offset<a class="headerlink" href="#offset" title="此标题的永久链接"></a></h3>
<p>With <code class="docutils literal notranslate"><span class="pre">lv_img_set_offset_x(img,</span> <span class="pre">x_ofs)</span></code> and <code class="docutils literal notranslate"><span class="pre">lv_img_set_offset_y(img,</span> <span class="pre">y_ofs)</span></code>, you can add some offset to the displayed image.
Useful if the object size is smaller than the image source size.
Using the offset parameter a <a class="reference external" href="https://en.wikipedia.org/wiki/Texture_atlas">Texture atlas</a> or a &quot;running image&quot; effect can be created by <a class="reference internal" href="../../overview/animation.html"><span class="doc std std-doc">Animating</span></a> the x or y offset.</p>
</section>
</section>
<section id="transformations">
<h2>Transformations<a class="headerlink" href="#transformations" title="此标题的永久链接"></a></h2>
<p>Using the <code class="docutils literal notranslate"><span class="pre">lv_img_set_zoom(img,</span> <span class="pre">factor)</span></code> the images will be zoomed. Set <code class="docutils literal notranslate"><span class="pre">factor</span></code> to <code class="docutils literal notranslate"><span class="pre">256</span></code> or <code class="docutils literal notranslate"><span class="pre">LV_IMG_ZOOM_NONE</span></code> to disable zooming.
A larger value enlarges the images (e.g. <code class="docutils literal notranslate"><span class="pre">512</span></code> double size), a smaller value shrinks it (e.g. <code class="docutils literal notranslate"><span class="pre">128</span></code> half size).
Fractional scale works as well. E.g. <code class="docutils literal notranslate"><span class="pre">281</span></code> for 10% enlargement.</p>
<p>To rotate the image use <code class="docutils literal notranslate"><span class="pre">lv_img_set_angle(img,</span> <span class="pre">angle)</span></code>. Angle has 0.1 degree precision, so for 45.8° set 458.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">transform_zoom</span></code> and <code class="docutils literal notranslate"><span class="pre">transform_angle</span></code> style properties are also used to determine the final zoom and angle.</p>
<p>By default, the pivot point of the rotation is the center of the image. It can be changed with <code class="docutils literal notranslate"><span class="pre">lv_img_set_pivot(img,</span> <span class="pre">pivot_x,</span> <span class="pre">pivot_y)</span></code>. <code class="docutils literal notranslate"><span class="pre">0;0</span></code> is the top left corner.</p>
<p>The quality of the transformation can be adjusted with <code class="docutils literal notranslate"><span class="pre">lv_img_set_antialias(img,</span> <span class="pre">true/false)</span></code>. With enabled anti-aliasing the transformations are higher quality but slower.</p>
<p>The transformations require the whole image to be available. Therefore indexed images (<code class="docutils literal notranslate"><span class="pre">LV_IMG_CF_INDEXED_...</span></code>), alpha only images (<code class="docutils literal notranslate"><span class="pre">LV_IMG_CF_ALPHA_...</span></code>) or images from files can not be transformed.
In other words transformations work only on true color images stored as C array, or if a custom <span class="xref myst">Image decoder</span> returns the whole image.</p>
<p>Note that the real coordinates of image objects won't change during transformation. That is <code class="docutils literal notranslate"><span class="pre">lv_obj_get_width/height/x/y()</span></code> will return the original, non-zoomed coordinates.</p>
<section id="size-mode">
<h3>Size mode<a class="headerlink" href="#size-mode" title="此标题的永久链接"></a></h3>
<p>By default, when the image is zoomed or rotated the real coordinates of the image object are not changed.
The larger content simply overflows the object's boundaries.
It also means the layouts are not affected the by the transformations.</p>
<p>If you need the object size to be updated to the transformed size set <code class="docutils literal notranslate"><span class="pre">lv_img_set_size_mode(img,</span> <span class="pre">LV_IMG_SIZE_MODE_REAL)</span></code>. (The previous mode is the default and called <code class="docutils literal notranslate"><span class="pre">LV_IMG_SIZE_MODE_VIRTUAL</span></code>).
In this case if the width/height of the object is set to <code class="docutils literal notranslate"><span class="pre">LV_SIZE_CONTENT</span></code> the object's size will be set to the zoomed and rotated size.
If an explicit size is set then the overflowing content will be cropped.</p>
</section>
</section>
<section id="events">
<h2>Events<a class="headerlink" href="#events" title="此标题的永久链接"></a></h2>
<p>No special events are sent by image objects.</p>
<p>See the events of the <a class="reference internal" href="../obj.html"><span class="doc std std-doc">Base object</span></a> too.</p>
<p>Learn more about <a class="reference internal" href="../../overview/event.html"><span class="doc std std-doc">Events</span></a>.</p>
</section>
<section id="keys">
<h2>Keys<a class="headerlink" href="#keys" title="此标题的永久链接"></a></h2>
<p>No <em>Keys</em> are processed by the object type.</p>
<p>Learn more about <a class="reference internal" href="../../overview/indev.html"><span class="doc std std-doc">Keys</span></a>.</p>
</section>
<section id="example">
<h2>Example<a class="headerlink" href="#example" title="此标题的永久链接"></a></h2>
<div class="highlight-eval_rst notranslate"><div class="highlight"><pre><span></span>
.. include:: ../../../examples/widgets/img/index.rst

</pre></div>
</div>
</section>
<section id="api">
<h2>API<a class="headerlink" href="#api" title="此标题的永久链接"></a></h2>
<div class="highlight-eval_rst notranslate"><div class="highlight"><pre><span></span>
.. doxygenfile:: lv_img.h
  :project: lvgl

</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; 版权所有 2021, LVGL Kft.
      <span class="lastupdated">最后更新于 2025 年 09 月 02 日.
      </span></p>
  </div>

  利用 <a href="https://www.sphinx-doc.org/">Sphinx</a> 构建，使用的 
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">主题</a>
    由 <a href="https://readthedocs.org">Read the Docs</a> 开发.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

<style>
  .wy-side-nav-search > div[role="search"] {
    color: black;
  }
</style>
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header").click(function() {
            $(this).parent().children().not(".header").toggle(400);
            $(this).parent().children(".header").toggleClass("open");
        })
    });
</script>

<script type="text/javascript">
function add_version_selector()
{
    return fetch("https://raw.githubusercontent.com/lvgl/docs_compiled/gh-pages/versionlist.txt")
        .then(res => res.text())
        .then(text => {
            const versions = text.split("\n").filter(version => version.trim().length > 0);
            let p = document.getElementById("rtd-search-form").parentElement;
            p.innerHTML = `
            <select name="versions" id="versions" onchange="ver_sel()" style="border-radius:5px; margin-bottom:15px">
            ${versions.map(version => {
                let versionName = "";  
                if(version == "master") versionName = "master (latest)";
                else versionName = "v" + ((version.indexOf(".") != -1) ? version : (version + " (latest minor)"));
                return `<option value="${version}">${versionName}</option>`;
            })}
            </select>` + p.innerHTML;
        });
}

function ver_sel()
{
  var x = document.getElementById("versions").value;
  window.location.href = window.location.protocol + "//" + window.location.host + "/" + x + "/";
}

document.addEventListener('DOMContentLoaded', (event) => {
    add_version_selector().then(() => {
        var value = window.location.pathname.split('/')[1];
        document.getElementById("versions").value = value;
    });
    
})
document.addEventListener('DOMContentLoaded', (event) => {
    function onIntersection(entries) {
        entries.forEach(entry => {
            let currentlyLoaded = entry.target.getAttribute("data-is-loaded") == "true";
            let shouldBeLoaded = entry.intersectionRatio > 0;
            if(currentlyLoaded != shouldBeLoaded) {
                entry.target.setAttribute("data-is-loaded", shouldBeLoaded);
                if(shouldBeLoaded) {
                    let iframe = document.createElement("iframe");
                    iframe.src = entry.target.getAttribute("data-real-src");
                    entry.target.appendChild(iframe);
                } else {
                    let iframe = entry.target.querySelector("iframe");
                    iframe.parentNode.removeChild(iframe);
                }
            }
        });
    }
    const config = {
        rootMargin: '600px 0px',
        threshold: 0.01
    };
    let observer = new IntersectionObserver(onIntersection, config);
    document.querySelectorAll(".lv-example").forEach(iframe => {
        observer.observe(iframe);
    });
});
</script>


</body>
</html>